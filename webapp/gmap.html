<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=TRUE">
    </script>
    <script type="text/javascript">
    var markerCoords = [];
    var mMap;
    var moonTypeOptions = {
        getTileUrl: function(coord, zoom) {
            var normalizedCoord = getNormalizedCoord(coord, zoom);
            if (!normalizedCoord) {
                return null;
            }
            var bound = Math.pow(2, zoom);

            // console.log("bound:",bound);

            markerCoords.push(coord);

            var url = "img/"+zoom+"/"+normalizedCoord.x+ "/" +
            (bound - normalizedCoord.y - 1) + ".png";
            // console.log(url);

            var rUrl = "http://mw1.google.com/mw-planetary/lunar/lunarmaps_v1/clem_bw" +
            "/" + zoom + "/" + normalizedCoord.x + "/" +
            (bound - normalizedCoord.y - 1) + ".jpg";
            console.log(rUrl);
            // console.log(url.slice(6,9));

            console.log("x:",coord.x,"y:",coord.y);
            // console.log("x:",coord.x,"\t=====>",normalizedCoord.x,"| y:",coord.y,"=====>",coord.y,"==>",(bound - normalizedCoord.y - 1),
            // "final:",normalizedCoord.x,(bound - normalizedCoord.y - 1));

            return url;
        },
        tileSize: new google.maps.Size(384, 384),
        maxZoom: 1,//9
        minZoom: 1,//0
        name: "AQ"
    };

    var moonMapType = new google.maps.ImageMapType(moonTypeOptions);

    function initialize() {
        var myLatlng = new google.maps.LatLng(0, 0);
        var mapOptions = {
            center: myLatlng,
            zoom: 1,
            streetViewControl: false,
            mapTypeControlOptions: {
                mapTypeIds: ["moon"]
            }
        };

        var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);
        map.mapTypes.set('moon', moonMapType);
        map.setMapTypeId('moon');

        mMap = map;
    }

    // Normalizes the coords that tiles repeat across the x axis (horizontally)
    // like the standard Google map tiles.
    function getNormalizedCoord(coord, zoom) {
        var y = coord.y;
        var x = coord.x;

        // tile range in one direction range is dependent on zoom level
        // 0 = 1 tile, 1 = 2 tiles, 2 = 4 tiles, 3 = 8 tiles, etc
        var tileRange = 1 << zoom;
        // console.log("y:",y);

        // don't repeat across y-axis (vertically)
        if (y < 0 || y >= tileRange) return null;

        // repeat across x-axis
        if (x < 0 || x >= tileRange) {
            x = (x % tileRange + tileRange) % tileRange;
        }

        return {
            x: x,
            y: y
        };
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
<div id="map-canvas"></div>
  </body>
</html>
